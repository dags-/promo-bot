<html>
<head>
    <style>
body {
    font-family: Sans-Serif;
}

form {
    width: 80%;
    margin: auto;
}

section {
    margin-top: 10px;
}

input {
    display: block;
    width: 100%;
    height: 40px;
}

input[type=checkbox] {
    display: inline;
    width: 20px;
    background-color: blue;
}

select {
    display: block;
    width: 100%;
    height: 40px;
}

label {
    display: block;
    width: 100%;
    vertical-align: top;

}

textarea {
    display: block;
    width: 100%;
    min-width: 100%;
    max-width: 100%;
    min-height: 80px;
}
    </style>
</head>
<body>
<form method="post">
    <section>
        <h1>#Promotion</h1>
        Submit an application to add your server or youtube/twitch channel to the official #promotion channel on the
        Conquest Reforged discord.
        <br>
        <br>
    </section>
    <section>
        <label>What are you promoting?</label>
        <select id="type" name="type">
            <option>server</option>
            <option>youtuber</option>
            <option>twitcher</option>
        </select>
    </section>
    <section>
        <label>Who are you promoting?</label>
        <input id="name" name="name" type="text" maxlength="120">
    </section>
    <section>
        <label>Describe what you're all about (you can use Discord message styling here!)</label>
        <textarea id="description" name="description" maxlength="240"></textarea>
    </section>
    <section>
        <label>Link a video/image to accompany your promo post</label>
        <input id="media" name="media" maxlength="120">
    </section>
    <section>
        <label>Got an instant invite link for your Discord? (tip: set it to 'never expire')</label>
        <input id="discord" name="discord" maxlength="120">
    </section>
    <section id="details"></section>
    <input type="submit">
</form>
</body>
<script>
window.addEventListener('load', function() {
    document.getElementById('type').addEventListener('change', onTypeChange);
    selectType('server');
})

function onTypeChange() {
    var index = this.selectedIndex;
    var type = this.options[index].value;
    selectType(type);
}

function selectType(type) {
    var details = document.getElementById('details');
    clear(details);
    switch (type) {
        case "server":
            return showServerInput(details);
        case "youtuber":
            return showYoutuberInput(details);
        case "twitcher":
            return showTwitcherInput(details);
    }
}

function showServerInput(div) {
    var ip = makeInput("What's the server's ip address?", 'ip', 'text');
    var website = makeInput("What's your website (if you have one)?", 'website', 'text');
    var whitelist = makeInput("Does your server use a whitelist?", 'whitelist', 'checkbox');

    div.appendChild(ip);
    div.appendChild(website);
    div.appendChild(whitelist);
}

function showYoutuberInput(div) {
    var title = makeInput("What's the name/title of your youtube channel?", 'title', 'text');
    var address = makeInput("What's the url of your youtube channel?", 'url', 'text');
    div.appendChild(title);
    div.appendChild(address);
}

function showTwitcherInput(div) {
    var username = makeInput("What's your twitch username?", 'username', 'text');
    var address = makeInput("What's the url for your twitch channel?", 'url', 'text');
    div.appendChild(username);
    div.appendChild(address);
}

function makeInput(title, name, type) {
    var label = document.createElement('label');
    label.innerText = title;

    var input = document.createElement('input');
    input.type = type;
    input.name = name;
    input.id = name;

    var section = document.createElement('section');
    section.appendChild(label);
    section.appendChild(input);

    return section;
}

function makeYesNoChecks() {
    var yes = document.createElement('input');
    yes.type = 'checkbox';
    yes.name = 'whitelist.yes';
    yes.id = 'whitelist-yes';
    yes.checked = false;

    var no = document.createElement('input');
    no.type = 'checkbox';
    no.name = 'whitelist.no';
    no.id = 'whitelist-no';
    no.checked = true;

    yes.addEventListener('change', function() {
        console.log(this.value);
        no.checked = !this.checked;
    });

    no.addEventListener('change', function() {
        console.log(this.value);
        yes.checked = !this.checked;
    });

    var section = document.createElement('section');
    section.appendChild(yes);
    section.appendChild(no);

    return section;
}

function clear(div) {
    while (div.lastChild !== null) {
        div.removeChild(div.lastChild);
    }
}
</script>
</html>